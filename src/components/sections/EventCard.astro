---
import type { EventType } from "@/types";
import EventBadge from "@/components/ui/EventBadge.astro";
import LocationBadge from "@/components/ui/LocationBadge.astro";
import PhotoIcon from "@/components/icons/PhotoIcon.astro";

interface Props {
  event: EventType;
}

const { event } = Astro.props;
const { id, title, location, startTime, endTime, details, image } = event;
---

<a href={`/events/${id}`} class="relative">
  <div
    class="relative flex h-full flex-col-reverse rounded-[10px] border border-light border-opacity-75 bg-darker md:flex-row"
  >
    <div class="flex flex-col gap-10 px-6 py-10 md:flex-row">
      <div class="flex max-w-2xl flex-col items-start gap-3">
        <div class="flex flex-wrap items-start gap-3">
          <EventBadge startTime={startTime} endTime={endTime} />
          <LocationBadge location={location} />
        </div>
        <h3 class="text-heading-tertiary">{title}</h3>
        <p class="text-copy line-clamp-2 overflow-hidden text-ellipsis">
          {details}
        </p>
      </div>
    </div>
    <div
      class="flex w-full items-center justify-center rounded-t-[10px] bg-purp px-10 py-8 md:w-1/3 md:rounded-r-[10px] md:rounded-tl-none"
    >
      {
        image ? (
          <div class="relative">
            <div class="absolute h-full w-full translate-x-1 translate-y-1 rounded-[10px] bg-purp-light" />
            <img
              class="relative min-w-24 rounded-[10px] object-cover"
              src={image.src}
              width={160}
              height={160}
              alt={image.alt}
            />
          </div>
        ) : (
          <div class="relative">
            <div class="absolute h-full w-full translate-x-1 translate-y-1 rounded-[10px] bg-purp-light" />
            <div class="relative grid h-[120px] w-28 place-items-center rounded-[10px] bg-violet-400">
              <PhotoIcon class="mx-auto size-20 text-violet-200" />
            </div>
          </div>
        )
      }
    </div>
  </div>
</a>
